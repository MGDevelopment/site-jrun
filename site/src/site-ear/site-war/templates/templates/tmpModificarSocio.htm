<div style="margin-top: 10px;">	
	<div class="compraWrapper2"><!--  style="background-color: #FBF5EF">-->
		<div class="cProcTit" style="margin-top: 0pt;"><span>Mis datos personales</span></div>
			<div class="cProcFor-wrapper2 cProcForms2" id="divMensajes" style="border:1px dashed #FF070F;color:red;display:none;padding:4px 4px 4px 25px;">
            	<b style="margin-bottom: 0pt;">&nbsp;</b>
            	<div style="margin-bottom: 0pt;text-align:center;" >
            	
            	</div>			            
     		</div>    
			<form metho="POST"  name="frmModificacion" id="frmModificacion">
		        <div class="cProcFor-wrapper2 cProcForms2">
		            <b style="margin-bottom: 0pt;"><label style="color:#FF0000;">*&nbsp;</label>Nombres</b>
		            <div style="margin-bottom: 0pt;">
		            	<span style="margin-right: 10px;">
		            		<input type="text" style="width: 150px;" name="nombres" value="<tmpl_var nombres>">
		            	</span>
		            </div>
		        </div>		        
		        <div class="cProcFor-wrapper2 cProcForms2">
		            <b style="margin-bottom: 0pt;"><label style="color:#FF0000;">*&nbsp;</label>Apellidos</b>
		            <div style="margin-bottom: 0pt;">
		            	<span style="margin-right: 10px;">
		            		<input type="text" style="width: 150px;" name="apellidos" value="<tmpl_var apellidos>">
		            	</span>
		            </div>
		        </div>
		        <div class="cProcFor-wrapper2 cProcForms2">
		            <b style="margin-bottom: 0pt;"><label style="color:#FF0000;">*&nbsp;</label>Direccion de e-Mail</b>
		            <div style="margin-bottom: 0pt;">
		            	<span style="margin-right: 10px;">
		            		<input type="text" style="width: 150px;" name="email" value="<tmpl_var login>">
		            	</span>
		            </div>
		        </div>
		        <div class="cProcFor-wrapper2 cProcForms2">
		            <b style="margin-bottom: 0pt;"><label style="color:#FF0000;">*&nbsp;</label>Clave de acceso</b>
		            <div style="margin-bottom: 0pt;">
		            	<span style="margin-right: 10px;">
		            		<input type="password" style="width: 150px;" name="password" value="<tmpl_var password>">
		            	</span>
		            </div>
		        </div>
		        <div class="cProcFor-wrapper2 cProcForms2">
		            <b style="margin-bottom: 0pt;"><label style="color:#FF0000;">*&nbsp;</label>Repetir clave de acceso</b>
		            <div style="margin-bottom: 0pt;">
		            	<span style="margin-right: 10px;">
		            		<input type="password" style="width: 150px;" name="rePassword" value="<tmpl_var password>">
		            	</span>
		            </div>
		        </div>
<!-- 	SI ES SOCIO TMK LE MUESTRO EL LINK NECESARIO,PARA QUE HABILITE LOS DEMAS CAMPOS -->		        
		        <tmpl_if esSocioTMK>		        	
			        <div class="cProcFor-wrapper2 cProcForms2">
			            <b style="margin-bottom: 0pt;">Datos adicionales</b>			            
		        	</div>
		        	<!-- CHECK BOX, HABILITA LOS CAMPOS -->
		        	<div class="cProcFor-wrapper2 cProcForms2">
			            <b style="margin-bottom: 0pt;">Completar datos adicionales</b>
			            <div style="margin-bottom: 0pt;">
			            	<span style="margin-right: 10px;">
			            		<input type="checkbox" name="datosPersonales" onclick="return habilitarDatos(this.checked)" onKeyPress="enviarDatos(event)">
			            	</span>
			            </div>
		        	</div>
		        </tmpl_if>
		        	<!--  DNI -->
		        	<div class="cProcFor-wrapper2 cProcForms2">
			            <b style="margin-bottom: 0pt;"><label style="color:#FF0000;">*&nbsp;</label>Documento de identidad</b>
			            <input type="hidden" name="tipoDoc" value="<tmpl_var tiposDeDocumentoSelected>"/>
			            <div style="margin-bottom: 0pt;">
			            	<span style="margin-right: 10px;">
			            		<select name="tipoDoc" disabled  onKeyPress="enviarDatos(event)">
			            			<option value="">selecciona</option>
			            			<tmpl_loop tiposDeDocumento>
			            				<option value="<tmpl_var tipoDocumentoId>" <tmpl_var selected>> <tmpl_var tipoDeDocumentoNombre></option>
			            			</tmpl_loop>
			            		</select>
			            	</span>
			            </div>
			            <div style="margin-bottom: 0pt;">
			            	<input type="hidden" name="nroDoc" value="<tmpl_var nroDoc>"/>
			            	<span style="margin-right: 10px;">
			            		<input name="nroDoc" type="text" size="8" maxlength="15"  value="<tmpl_var nroDoc>" disabled tabindex="8" onKeyPress="enviarDatos(event)"/>
			            	</span>
			            </div>
		        	</div>
		        	<!-- NACIONALIDAD -->
		        	<div class="cProcFor-wrapper2 cProcForms2">
			            <b style="margin-bottom: 0pt;"><label style="color:#FF0000;">*&nbsp;</label>Nacionalidad</b>
			            <input type="hidden" name="nacionalidad" value="<tmpl_var paisIdSelected>"/>
			            <div style="margin-bottom: 0pt;">
			            	<span style="margin-right: 10px;">			            		
								<select name="nacionalidad" disabled  onKeyPress="enviarDatos(event)">
									<option value="">selecciona</option>
									<tmpl_loop paises>
			            				<option value="<tmpl_var paisId>" <tmpl_var selected>> <tmpl_var paisNombre></option>
			            			</tmpl_loop>
								</select>			            		
			            	</span>
			            </div>			            
        			</div>
        			<!-- SEXO -->
        			<div class="cProcFor-wrapper2 cProcForms2">
			            <b style="margin-bottom: 0pt;"><label style="color:#FF0000;">*&nbsp;</label>Sexo</b>
			            <div id="sexo">
			            	<input type="hidden" name="sexo" value="<tmpl_var checkedSexo>"/>
			            	<div style="margin-bottom: 0pt;width:100px;">
				            	<input type="radio" name="sexo" value="M" disabled <tmpl_var checkedSexoM>>Masculino
				        	</div>
				            <div style="margin-bottom: 0pt;width:100px;" >
				            	<input type="radio" name="sexo" value="F" disabled <tmpl_var checkedSexoF>>Famenino
				        	</div>
			        	</div>		        				        
		        	</div>
        			<!-- FECHA DE NACIMIENTO -->
        			<div class="cProcFor-wrapper2 cProcForms2">
			            <b style="margin-bottom: 0pt;">Fecha de nacimiento</b>
			            <div style="margin-bottom: 0pt;">
			            	<span style="margin-right: 10px;">
			            		<input type="text" style="width: 22px;" name="fechaNacDD"  value="<tmpl_var fechaNacDD>" <tmpl_var disabledSocioTMK>>
			            		<input type="text" style="width: 22px;" name="fechaNacMM"  value="<tmpl_var fechaNacMM>" <tmpl_var disabledSocioTMK>>
			            		<input type="text" style="width: 30px;" name="fechaNacAAAA"  value="<tmpl_var fechaNacAAAA>" <tmpl_var disabledSocioTMK>>
			            	</span>
			            </div>
		        	</div>
		        	<!-- ESTADO CIVIL -->
					<div class="cProcFor-wrapper2 cProcForms2">
			            <b style="margin-bottom: 0pt;">Estado civil</b>
			            <div style="margin-bottom: 0pt;">
			            	<span style="margin-right: 10px;">			            		
								<select name="estadoCivil" <tmpl_var disabledSocioTMK> onKeyPress="enviarDatos(event)">
									<option value="">selecciona</option>
									<tmpl_loop estadosCivil>
			            				<option value="<tmpl_var estadoCivilId>" <tmpl_var selected>> <tmpl_var estadoCivilNombre></option>
			            			</tmpl_loop>
								</select>			            		
			            	</span>
			            </div>			            
        			</div>
        			<!-- HIJOS -->
        			<div class="cProcFor-wrapper2 cProcForms2">
			            <b style="margin-bottom: 0pt;">Hijos</b>
			            <div style="margin-bottom: 0pt;">
			            	<span style="margin-right: 10px;">
			            		<input type="text" style="width: 22px;" name="hijos" value="<tmpl_var hijos>" <tmpl_var disabledSocioTMK>>
			            	</span>
			            </div>
		        	</div>		
		        	<!-- PROFESIÓN -->
		        	<div class="cProcFor-wrapper2 cProcForms2">
			            <b style="margin-bottom: 0pt;">Profesión</b>
			            <div style="margin-bottom: 0pt;">
			            	<span style="margin-right: 10px;">			            		
								<select name="profesion" <tmpl_var disabledSocioTMK> onKeyPress="enviarDatos(event)">
									<option value="">selecciona</option>
									<tmpl_loop profesiones>
			            				<option value="<tmpl_var profesionId>" <tmpl_var selected>> <tmpl_var profesionNombre></option>
			            			</tmpl_loop>
								</select>			            		
			            	</span>
			            </div>			            
        			</div>
        			<div class="cProcFor-wrapper2 cProcForms2" id="btnModificar">
			            <b style="margin-bottom: 0pt;"></b>			            		
						<a class="detalleBoton carritoAgregar" style="margin:5px 15px 0 0;text-align:center;" href="#" onclick="modificarSocio(document.frmModificacion);"><span>Modificar Datos</span></a>
        			</div>         	
	       </form>	       
	       <div class="cProcFor-wrapper2 cProcForms2" style="background-color: #F8ECE0;">
	            <div style="margin-bottom: 0pt;">
	            	<span style="margin-right: 10px;font-size:11px;">
						Disposición (Dirección Nacional de Protección de Datos Personales) 10/2008<p>
						<p>"El titular de los datos personales tiene la facultad de ejercer el derecho de acceso a los mismos en forma gratuita a intervalos no inferiores a seis meses, salvo que se acredite un interés legítimo al efecto conforme lo establecido en el artículo 14, inciso 3 de la Ley Nº 25.326"</p>
						<p>"La DIRECCION NACIONAL DE PROTECCION DE DATOS PERSONALES, órgano de control de la Ley Nº 25.326, tiene la atribución de atender las denuncias y reclamos que se interpongan con relación al incumplimiento de las normas sobre protección de datos personales".<p>
	            	</span>
	            </div>			            
      		</div>
	</div>
</div>
<!-- /*** debajo los scripts****/ -->
<script type="text/javascript">
	var divLoading = '<img style=\"padding-left:40%;width:30px;height:30px;\" src=\"/imagenes/rediseno/imagenes/comun/loading.gif\">';	
function modificarSocio(frm) {
		for (i=0; i<frm.elements.length; i++) {
			frm.elements[i].style.backgroundColor = "#ffffff";
		}
		//uso dos campos para sexo por que si no queda mal 
		$('#sexo').get(0).style.backgroundColor = "#FFFFFF";

		var valorSexo = '';
		for (i=0; i<frm.elements.length; i++) {
			if (frm.elements[i].name == 'sexo' && frm.elements[i].checked) {
				valorSexo = frm.elements[i].value;
			}
		}
		//var datos = $('#frmModificacion').formSerialize();
		var datos = $("#frmModificacion :input[value][value!='.']").serialize(); 
		
		datos += <tmpl_if esSocioTMK>'&datosPersonales='+ frm.datosPersonales.checked</tmpl_else>''</tmpl_if>;
		var mensaje = '#divMensajes';
		$.ajax({
			cache:false,
			type: "POST",
			dataType:"json",
			url:'/ModificarSocio',
			data: datos,
			beforeSend: function(obj) {
				$(mensaje).get(0).innerHTML = divLoading;
				$('#divMensajes').css("display","block");
				$('#btnModificar').css("display","none");
			},			
			success: function(obj){
					$('#btnModificar').css("display","block");			  					
					if (obj.Resultado.valor) {
						$('#divMensajes').css("color","green");
						$('#divMensajes').css("border","1px dashed green");
						$('#frmModificacion').get(0).style.display = "none";
						$(mensaje).html(obj.Resultado.mensaje[0]);
						$(mensaje).html($(mensaje).html()+'&nbsp;<a style="font-weight:bolder;" href=\"/miCuenta/modificarSocio.jsp\">Continuar</a>');
						//$('#username').get(0).value = 'null';
					} else {
						//errores
						if (obj.Resultado.mensaje != null) {
							$('#divMensajes').html("");
							for(i=0; i<obj.Resultado.mensaje.length; i++) {
								$('#divMensajes').html( $('#divMensajes').html() +
								obj.Resultado.mensaje[i] + '<br>');
							}
						}
						if (obj.Resultado.campo != null) {
							if (obj.Resultado.campo[0] == 'sexo') {
								var campo = eval ('document.frmModificacion.' + obj.Resultado.campo[0] + "[0]");
							} else {
								var campo = eval ('document.frmModificacion.' + obj.Resultado.campo[0]);
							}
							campo.focus();
							for(i=0; i<obj.Resultado.campo.length; i++) {
								if (obj.Resultado.campo[i] == 'sexo') {
									$('#sexo').get(0).style.backgroundColor = "#FF6666";
								} else {
									var campo = eval ('document.frmModificacion.' + obj.Resultado.campo[i]);
									campo.style.backgroundColor = "#FF6666";
								}
							}
						}
						if (obj.Resultado.targetRedirect) {
					    	window.location.href = obj.Resultado.targetRedirect;
				      	}
					}
			}
		});
		return false;
	}

	function habilitarDatos(habilitar) {
		var frm = document.frmModificacion;
		frm.tipoDoc[1].disabled = !habilitar;
		frm.nroDoc[1].disabled = !habilitar;
		frm.nacionalidad[1].disabled = !habilitar;
		frm.sexo[1].disabled = !habilitar;
		frm.sexo[2].disabled = !habilitar;
		frm.fechaNacDD.disabled = !habilitar;
		frm.fechaNacMM.disabled = !habilitar;
		frm.fechaNacAAAA.disabled = !habilitar;
		frm.estadoCivil.disabled = !habilitar;
		frm.profesion.disabled = !habilitar;
		frm.hijos.disabled = !habilitar;
		/*if(habilitar){
			$('#lnkpopego').get(0).style.display = 'block';
			$('#lnkpopegodes').get(0).style.display = 'none';
		}
		else {
			//$('#lnkpopegodes').get(0).style.display = 'block';
			//$('#lnkpopego').get(0).style.display = 'none';
			//$('#lnkCancelar').get(0).style.display = 'none';
			//$('#result').get(0).innerHTML = '';
			//if($('#result').get(0).innerHTML !='') {
				resetUserName();*/
		//}
		//setLoginPopegoVisible(habilitar);
	}

	function enviarDatos(e) {
		var tecla = (document.all) ? e.keyCode : e.which;
		if (tecla == 13) {
			modificarSocio(document.frmModificacion);
		}
	}	
	//crearWidgets(estado);
</script>
